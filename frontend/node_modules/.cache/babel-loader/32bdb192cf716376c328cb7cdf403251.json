{"ast":null,"code":"import _asyncToGenerator from\"D:/Web Development/woodsy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Web Development/woodsy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\Web Development\\\\woodsy\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from\"react\";import ReactPayPal from\"../PaypalBtn\";import\"./userDetails.css\";import{PayPalButton}from\"react-paypal-button-v2\";import{useEffect,useState,useContext}from\"react\";import CartContext from\"../../context/cart-context\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserDetails=function UserDetails(){// add btn for editing and toggleform\nvar cartCtx=useContext(CartContext);var userShippingDetails=JSON.parse(localStorage.getItem(\"shippingDetails\"));console.log(userShippingDetails);var totalPlusTax=cartCtx.totalAmount+cartCtx.totalAmount*8.8/100;var priceRounded=Math.round((totalPlusTax+Number.EPSILON)*100)/100;var shippingPrice=userShippingDetails.shipping==10?10:userShippingDetails.shipping==20?20:0;var totalRoundedPrice=priceRounded+ +shippingPrice;var orderSummery=JSON.parse(localStorage.getItem(\"cartState\"));var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sdkReady=_useState2[0],setSdkReady=_useState2[1];useEffect(function(){var addPayPalScript=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var script;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:script=document.createElement(\"script\");script.type=\"text/javascript\";script.src=\"https://www.paypal.com/sdk/js?client-id=AQAFDBnSRJ4OB9fcHbHkBX3DfOTLkLbYC2zmaH76CUkRh8Ag4J5qVCJGlVVwR6Nc-YqTPH2xsoCl1yr0\";script.async=true;script.onload=function(){setSdkReady(true);};document.body.appendChild(script);case 6:case\"end\":return _context.stop();}}},_callee);}));return function addPayPalScript(){return _ref.apply(this,arguments);};}();if(!window.paypal){addPayPalScript();}else{setSdkReady(true);}},[]);var successPaymentHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var URL,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:URL=\"http://woodsy-backend.eba-uej58ayn.us-west-2.elasticbeanstalk.com/api/create_order\";_context2.next=3;return axios.post(URL,{order:orderSummery,shipping:userShippingDetails});case 3:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function successPaymentHandler(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-details-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"contact-wrap\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"form-title\",children:\"Contact Details\"}),/*#__PURE__*/_jsx(\"p\",{className:\"user-phone\",children:userShippingDetails.phone}),/*#__PURE__*/_jsx(\"p\",{className:\"user-email\",children:userShippingDetails.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-wrap\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"form-title\",children:\"Shipping Details\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"user-name\",children:[userShippingDetails.firstname,\" \",userShippingDetails.lastname]}),/*#__PURE__*/_jsx(\"p\",{className:\"address1\",children:userShippingDetails.add1}),/*#__PURE__*/_jsx(\"p\",{className:\"address2\",children:userShippingDetails.add2}),/*#__PURE__*/_jsxs(\"p\",{className:\"city-state-zip\",children:[userShippingDetails.city,\", \",userShippingDetails.state,\",\",\" \",userShippingDetails.zip]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ship-type-wrap\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"form-title\",children:\"Shipping Type\"}),/*#__PURE__*/_jsx(\"p\",{className:\"user-ship\",children:userShippingDetails.shipping==0?\"Normal Shipping (4-5 days)\":userShippingDetails.shipping==10?\"Fast Shipping (2-3 days)\":\"Super Fast Shipping (1 day)\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"paypal-wrap\",children:/*#__PURE__*/_jsx(PayPalButton,{amount:totalRoundedPrice,onSuccess:successPaymentHandler})})]});};export default UserDetails;","map":{"version":3,"names":["React","ReactPayPal","PayPalButton","useEffect","useState","useContext","CartContext","axios","UserDetails","cartCtx","userShippingDetails","JSON","parse","localStorage","getItem","console","log","totalPlusTax","totalAmount","priceRounded","Math","round","Number","EPSILON","shippingPrice","shipping","totalRoundedPrice","orderSummery","sdkReady","setSdkReady","addPayPalScript","script","document","createElement","type","src","async","onload","body","appendChild","window","paypal","successPaymentHandler","URL","post","order","data","phone","email","firstname","lastname","add1","add2","city","state","zip"],"sources":["D:/Web Development/woodsy/frontend/src/components/userDetails/UserDetails.jsx"],"sourcesContent":["import React from \"react\";\r\nimport ReactPayPal from \"../PaypalBtn\";\r\nimport \"./userDetails.css\";\r\nimport { PayPalButton } from \"react-paypal-button-v2\";\r\nimport { useEffect, useState, useContext } from \"react\";\r\nimport CartContext from \"../../context/cart-context\";\r\nimport axios from \"axios\";\r\n\r\nconst UserDetails = () => {\r\n  // add btn for editing and toggleform\r\n  const cartCtx = useContext(CartContext);\r\n  const userShippingDetails = JSON.parse(\r\n    localStorage.getItem(\"shippingDetails\")\r\n  );\r\n  console.log(userShippingDetails);\r\n  const totalPlusTax = cartCtx.totalAmount + (cartCtx.totalAmount * 8.8) / 100;\r\n  const priceRounded = Math.round((totalPlusTax + Number.EPSILON) * 100) / 100;\r\n  const shippingPrice =\r\n    userShippingDetails.shipping == 10\r\n      ? 10\r\n      : userShippingDetails.shipping == 20\r\n      ? 20\r\n      : 0;\r\n  const totalRoundedPrice = priceRounded + +shippingPrice;\r\n  const orderSummery = JSON.parse(localStorage.getItem(\"cartState\"));\r\n\r\n  const [sdkReady, setSdkReady] = useState(false);\r\n  useEffect(() => {\r\n    const addPayPalScript = async () => {\r\n      const script = document.createElement(\"script\");\r\n      script.type = \"text/javascript\";\r\n      script.src = `https://www.paypal.com/sdk/js?client-id=AQAFDBnSRJ4OB9fcHbHkBX3DfOTLkLbYC2zmaH76CUkRh8Ag4J5qVCJGlVVwR6Nc-YqTPH2xsoCl1yr0`;\r\n      script.async = true;\r\n      script.onload = () => {\r\n        setSdkReady(true);\r\n      };\r\n      document.body.appendChild(script);\r\n    };\r\n\r\n    if (!window.paypal) {\r\n      addPayPalScript();\r\n    } else {\r\n      setSdkReady(true);\r\n    }\r\n  }, []);\r\n\r\n  const successPaymentHandler = async () => {\r\n    const URL =\r\n      \"http://woodsy-backend.eba-uej58ayn.us-west-2.elasticbeanstalk.com/api/create_order\";\r\n    const { data } = await axios.post(URL, {\r\n      order: orderSummery,\r\n      shipping: userShippingDetails,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"user-details-container\">\r\n        <div className=\"contact-wrap\">\r\n          <h4 className=\"form-title\">Contact Details</h4>\r\n          <p className=\"user-phone\">{userShippingDetails.phone}</p>\r\n          <p className=\"user-email\">{userShippingDetails.email}</p>\r\n        </div>\r\n        <div className=\"add-wrap\">\r\n          <h4 className=\"form-title\">Shipping Details</h4>\r\n          <p className=\"user-name\">\r\n            {userShippingDetails.firstname} {userShippingDetails.lastname}\r\n          </p>\r\n          <p className=\"address1\">{userShippingDetails.add1}</p>\r\n          <p className=\"address2\">{userShippingDetails.add2}</p>\r\n          <p className=\"city-state-zip\">\r\n            {userShippingDetails.city}, {userShippingDetails.state},{\" \"}\r\n            {userShippingDetails.zip}\r\n          </p>\r\n        </div>\r\n        <div className=\"ship-type-wrap\">\r\n          <h4 className=\"form-title\">Shipping Type</h4>\r\n          <p className=\"user-ship\">\r\n            {userShippingDetails.shipping == 0\r\n              ? \"Normal Shipping (4-5 days)\"\r\n              : userShippingDetails.shipping == 10\r\n              ? \"Fast Shipping (2-3 days)\"\r\n              : \"Super Fast Shipping (1 day)\"}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div className=\"paypal-wrap\">\r\n        <PayPalButton\r\n          amount={totalRoundedPrice}\r\n          onSuccess={successPaymentHandler}\r\n        ></PayPalButton>\r\n      </div>\r\n      {/* <button onClick={successPaymentHandler}>Click me!!</button> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserDetails;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}